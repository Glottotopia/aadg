#**
 *  Render a hit representing a Product
 *  assumed to have a field called "name"
 *#

#set ( $exnr = 0 )
#set( $ontofieldsutt = [ ["speech_act_type",["question", "command", "assertion"]]] )  
#set( $ontofieldsprop = [["semantic_role",['agent',"patient","instrument"]],
			["participant",["speaker","addressee"]],
			["polarity",["positive", "negative"]],
			["syntax", ["complex", "simple"]],
			["nexus",["AND","OR","final","causal"]],
			["evidentiality",["reportative", "hearsay"]],
			["focus", ["argument focus", "predicate focus", "sentence focus"]],
			["modality", ["facultative", "epistemic", "deontic", "volitive", "debitive"]]] )  
#set( $ontofieldspred = [["temporal_reference",["past", "present", "future"]],
			 ["grade",  ["comparative", "superlative"]],
			 ["phase", ["inceptive", "progressive", "terminative"]],
			 ["orientation", ["direct", "inverse", "reflexive", "reciprocal"]]] )  
#set( $ontofieldspart =[["noun",["common noun", "proper noun"]],
			["quantity",["definite", "indefinite"]],
			["distance", ["proximal", "distal"]],
			["possession", ["attributive", "predicative"]],
			["quantification", ["all", "some", "none"]]] )  
#set( $megafields = [$ontofieldsutt, $ontofieldspred, $ontofieldsprop, $ontofieldspart])

<div class="result-title">




<b>#field('name')</b>
<button class="yui3-button hideshowbutton"  name="showexex" id="showexb">&#x25BE;</button>
<button class="yui3-button hideshowbutton" name="hideexex" id="hideexb">&#x25B4;</button>
## <span class="mlt">   #if($params.getBool('mlt', false) == false)
## <a href="#lensNoQ&q=id:$docId&mlt=true">More Like This</a>
## #end
## </span>
</div>
#set($store = $doc.getFieldValue('store'))
#if($store)<div class="map"><img src="http://maps.google.com/maps/api/staticmap?&zoom=12&size=150x80&maptype=roadmap&markers=$doc.getFieldValue('store')&sensor=false" /><div><small><a target="_map" href="http://maps.google.com/?q=$store&amp;source=embed">Larger Map</a></small></div></div>#end
 


<table> 
  <tr>
     <td class="lxmeta">
	<table>
	    <tr>
		<td class="lxnumber">(#field('id'))</td>
## 		<td class="lxnumber">($exnr)</td>
	    </tr>
	    <tr>
		<td class="lxlg">#field('iso639-3')</td>
		<td class="lxlg"> </td>
	    </tr>
	</table>
    </td>
   <td>
	<table class="lxtable">
	    <tr class="vernacular">  
	    #set( $vs = $doc.getFieldValue('vernacularsentence') )  
	    #set($array = $vs.split(" ")) 
	    #set( $l =  0)
	    #foreach($a in $array)
		<td> $a   </td>
		#set ( $l = $l + 1 )
	    #end
	    </tr> 
	    <tr name="extr" style="display:none;" id="imtline$exnr"> 
	    #set( $exnr = $exnr + 1 )
	    #set( $imts = $doc.getFieldValue('imtsentence') )  
	    #set($array = $imts.split(" ")) 
	    #foreach($a in $array)
		<td> $a </td>
	    #end
	    </tr>
	    <tr><td colspan="$l">" #field('translatedsentence') "</td></tr>
	</table>
   </td>
  </tr>
</table> 

<div class="byline"><span>#field('language')</span><span> #field('author')</span></div>

##   <div class="tagcontainer"  name="extr" style="display:none;" id="tagcontainer">
<div class="tagcontainer"  name="extr"  id="tagcontainer"> 
#foreach($fieldname in $doc.fieldNames) 
    #foreach($ontofields in $megafields)   
	#foreach( $ontofield in $ontofields)  
## 		$ontofield[0]
		#if($fieldname == $ontofield[0])  
		    <div class="tag">
			<span class="field">$fieldname</span>
			<span class="value">
			#foreach($value in $doc.getFieldValues($fieldname))
			    $esc.html($value)
			#end
			</span>
		    </div>
		#end
	    #end
	#end	 
#end	 
</div> 

<script  type="text/javascript">
function yuitest(fct,id,field){
    var callbacks = { 
	success : function (o) {
	    var msg;  
	    try {
		r = YAHOO.lang.JSON.parse(o.responseText);
		msg = r.msg
		status = r.status
	    }
	    catch (x) {
		alert("JSON Parse failed!");
		return;
<<<<<<< .mine
	    }
	    alert(msg);
## 	    // The returned data was parsed into an array of objects.
## 	    // Add a P element for each received message 
## 		var p = document.createElement('p'); 
## 		p.appendChild();
		
## 		document.getElementById("callbackmsg").appendChild(document.createTextNode(msg)); 
=======
	    } 
## 		document.getElementById("callbackmsg").appendChild(document.createTextNode(msg)); 
	    cid = "callbackmsg"+id
## 	    alert(cid)
	    document.getElementById(cid).innerHTML = msg
	    document.getElementById(cid).setAttribute("class",status+ " callbackmsg")
	    document.getElementById(cid).setAttribute("style",'')
>>>>>>> .r24
	},
	failure : function(o){
	    alert("connection error")
	}
    };
    // Make the call to the server for JSON data 
    host = "http://88.198.149.2/athagram/mod"; 
##     alert(id)
##     alert(field)
##     alert(field+id)
    valuefield= document.getElementById(field+id); 
##     alert(valuefield)
    value = valuefield.value
##     alert(value)
    address = host+'/'+fct+'/'+id+'/'+field+'/'+value
##     alert(address)
    YAHOO.util.Connect.asyncRequest('GET', address, callbacks);
}
</script>
    

<div class="tagbag" name="extr"  id="tagbag"> 
    <div class="callbackmsg" id="callbackmsg$doc.getFieldValue('id')" style="display:none;">
	
    </div>

    #foreach($ontofields in $megafields) 
	<div class="tagrow" >
	    #foreach($ontofield in $ontofields)
		#set( $tid = $ontofield[0]+$doc.getFieldValue('id'))
		<span class="tagadder">	  
		    <select size="1" name="value" class="yui3-button" id="$tid"> 
			<option>$ontofield[0]</option> 
			#foreach($v in $ontofield[1])
			    <option>$v</option> 
			#end	
		    </select> 
		    <a href="#" onClick="yuitest('add','$doc.getFieldValue('id')','$ontofield[0]');" style="text-decoration:none;">+</a>	
		    <a href="#"  onClick="yuitest('delete','$doc.getFieldValue('id')','$ontofield[0]')";  style="text-decoration:none;">&ndash;</a>		    
		</span>
	    #end
	</div>
    #end
</div>
 
#parse('debug.vm')
